<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragment/head"></head>

<body style="background: #E3E4E8">

<form class="panel-body" role="form" id="entities" onsubmit="return false;"><!--class="form-horizontal"style="background: #E3E4E8"-->
    <div class="wrapper">
        <div class="row">
            <section class="panel panel-info">
                <header class="panel-heading">
                    <h3 class="panel-title">获取表配置</h3>
                </header>
                <div class="panel-body">
                    <table class="table  table-hover general-table">
                        <tbody>
                        <tr>
                            <td>
                                <label class="control-label">选择数据源</label>
                            </td>
                            <td>
                                <select name="datasource" class="form-control" onchange="changeValue(this)" id="datasource">
                                    <option></option>
                                    <option th:each="datasource:${dataSources}" th:text="${datasource.dataSourceNickName}" th:id="${datasource.dataBaseType}" th:value="${datasource.dataBaseType+'||'+datasource.hostName+'||'+datasource.port+'||'+datasource.username+'||'+datasource.password+'||'+datasource.dataBaseName}" ></option>
                                </select>
                            </td>
                            <td>
                                <label class="control-label">数据库表名</label>
                            </td>
                            <td>
                                <input type="text" class="form-control" th:name="tableName" placeholder="字母">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label class="control-label">数据库类型</label>
                            </td>
                            <td>
                                <select class="form-control" name="dataBaseType" id="dataBaseType">
                                    <option th:value="MySQL" th:text="MySQL"></option>
                                    <option th:value="PostgreSql" th:text="PostgreSql"></option>
                                    <option th:value="Oracle " th:text="Oracle"></option>
                                </select>
                            </td>
                            <td>
                                <label class="control-label">主机名</label>
                            </td>
                            <td>
                                <input type="text" class="form-control" th:name="hostName" id="hostName" placeholder="主机名或IP" value="localhost">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label class="control-label">端口号</label>
                            </td>
                            <td>
                                <input type="number" class="form-control" th:name="port" placeholder="端口号" id="port">
                            </td>
                            <td>
                            <label  class="control-label">数据库名称</label>
                            </td>
                            <td>
                                <input type="text" class="form-control" th:name="dataBaseName" placeholder="数据库名" id="dataBaseName">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label class="control-label">用户名</label>
                            </td>
                            <td>
                                <input type="text" class="form-control" th:name="username" placeholder="用户名" id="username">
                            </td>
                            <td>
                                <label  class="control-label">密码</label>
                            </td>
                            <td>
                                <input type="password" class="form-control" th:name="password" placeholder="密码" id="password">
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            <section class="panel">
                <!--<header class="panel-heading">-->
                    <!--<button class="btn btn-success" th:alt-title="实体属性" onclick="addTr('moduleTable','demoTr')">点击为表增加属性</button>-->
                    <!--<button class="btn btn-success" th:alt-title="自动生成表" onclick="showConfig()">自动生成表</button>-->
                <!--</header>-->
            </section>
        </div>
    </div>
</form>


<!--</section>-->
<script>
    function changeValue(obj) {
        var value = $(obj).val();
        if(value!=null) {
            var values = value.split("||");
            //$("#datasource").find("option[text='"+values[0]+"']").attr("selected", "selected");
            $("#dataBaseType").find("option:selected").attr("selected",false);
            //$("'#"+values[0]+"'").attr("selected", "selected");
            $("#dataBaseType option[value='"+values[0]+"']").attr("selected", true);
            $("#hostName").val(values[1]);
            $("#port").val(values[2]);
            $("#username").val(values[3]);
            $("#password").val(values[4]);
            $("#dataBaseName").val(values[5]);
        }
    }
</script>
<script th:replace="fragment/script"></script>
</body>
</html>
